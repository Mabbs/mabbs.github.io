---
layout: post
title: 关于HiFi的尝试与探索
tags: [HiFi, 音乐]
---

  如何才能听到最原始的音乐呢？<!--more-->    

# 起因
  前段时间，有人在QQ群中送网易云音乐的7天体验VIP，于是随手领了一份。有了VIP之后除了可以下载仅限VIP的音乐以外，还可以选择更好的音质。我现在用的是[MacBook Pro](/2023/02/03/mbp.html)，据说在笔记本中音响效果是最好的，那么我为了能对得起这优秀的音响，也不该听垃圾音质的音乐，所以就来探索一下如何听到HiFi的音乐吧。   

# 获得音乐
  下载音乐很简单，直接下一个网易云音乐客户端就可以，不过需要注意要在设置中修改下载音质，默认选项不是最高音质。另外它这个VIP还不是最高的，再往上还有SVIP，可以听所谓的“超清母带”的音质，我不太清楚这个无损以上的那些音质到底是什么东西，也不可能为了这点东西给网易云充钱，所以我就选了个“高清臻音”的选项。   
  当我在下载一些免费歌曲的时候，下载到的文件是flac格式，看起来应该是没什么问题。但是下载VIP独享音乐的时候，正在下载时是flac格式，可是下载完就变成ncm格式了……虽然我知道有一些解密这些格式的软件（GitHub上有，不过好多都被DMCA takedown了，虽然也能搜到[一些](https://github.com/rainlotus97/unlock-music)……），不过我还是比较好奇这个过程，既然它下载时是flac，那我在它刚下载完要变成ncm之前把网易云音乐强制结束掉不就可以获得完整的flac文件了嘛。试了一下还真可以，也就是说这个ncm加密的过程是在客户端完成的，而不是在服务器上，这还真是有点离谱……我用这个方法下载了几首喜欢听的歌，试了一下都能正常播放。不过用这个办法下载的音乐在客户端的下载中看不到，所以就没有歌词之类的东西了。   

# 分析音乐
  虽然说下载下来的文件是flac格式，但是不代表这就是无损的音乐。毕竟从网易云音乐的“无损”以上的选项都是flac的，那到底它这个无损是真无损吗？首先我在网上搜了一下，网易云音乐的黑历史很多，有些人在网易云音乐上上传了mp3的音乐，结果也有无损的选项。也就是说它这个flac很有可能是直接用mp3转换格式过来的。那这样我就不愿意了，我可以接受下不到无损，但是不能接受本来是mp3格式然后转成flac结果文件体积大增，给我的硬盘塞一堆没用的数据，所以现在我需要证明刚刚下载的音乐不是一堆没用的垃圾。   
  我看有人说可以使用[spek](https://github.com/alexkay/spek)查看时频谱来验证，如果是直接用mp3格式转换的flac文件会被整齐的砍一刀，因为mp3格式支持的最大采样率是48kHz，而根据香农采样定理，采样频率应该大于等于模拟信号频谱中最高频率的2倍，那么mp3支持的最高频率就是24kHz，所以用mp3转换出来的flac一般会在24kHz那里切一刀，更有甚者，如果是44.1kHz采样率的mp3就会在22kHz左右的位置切一刀。不过理论上人类的听力上限就是20kHz，更高的频率理论上人类应该是听不到。但毕竟我们追求的是HiFi，和人类能不能听到没有关系，要保证的是完整的复刻**所有**的信息。   
  于是我在我的Mac上用brew安装了spek，安装好之后直接执行spek+音乐文件的位置就可以了，我看了一下刚刚从网易云上下载的音乐，全都是96kHz采样率的音乐，而且没有被切过的痕迹。那这样就能证明网易云音乐就是真无损了吗？其实我也不知道，因为我没有从发行商直接获得的原始文件，一般要对比原始文件才知道是不是无损的……不过我在网上看说无论是“高清臻音”还是“超清母带”无一例外全都是用AI升频制作的，所以看时频谱已经没有意义了……但是我又没有证伪的方法，那就只能先凑合听喽～   

# 播放音乐
  既然音乐已经下好了，那么我直接用我的MacBook Pro播放的音乐它够HiFi吗？虽然我能听出mp3中128kbps和320kbps的区别，但是再高的我也听不出来……不过HiFi要的不是人能不能听出来，而是它发出的声音是不是完美还原。这要怎么证明呢？虽然我没有办法听出来，但如果有可视化的分析至少能看出来，于是我在手机上下载了一款“声音分析仪”软件，它可以用FFT算法分析手机话筒收集到频谱然后展现出来。只是可视化之后……我也很难看出来它够不够HiFi啊，当然理论上如果能保证播放音乐的音响和收听音乐的话筒都是最好的，那么两边的频谱应该是一样的，但是现实中还有底噪的存在，不可能完全一样……虽然如此，但我在看频谱的时候发现，播放的音乐最高频率似乎只有20kHz，我已经测过手机的话筒是能接收到更高的频率的，既然MacBook Pro的音响是最好的，怎么会只能播放20kHz的声音呢？而且它这个20kHz很明显有一刀切的感觉，应该是哪里配置错了。   
  于是我搜了一下，Mac默认输出的声音貌似只有44100Hz的采样率，需要在“音频MIDI设置”中将扬声器输出的格式改成更高的才能播放更高的频率。不过这也挺奇怪的，44.1kHz的最高频率是22kHz啊，为什么会在20kHz那里砍一刀呢？看香农采样定理所说的是大于等于，也许就是这个原因吧？既然我的音乐都是96kHz采样率的音乐，那么我就应该把这里的设置改成一样的。改完之后又测试了一下，发现确实是突破了20kHz，但好像没有超过22kHz，不过至少没有“砍一刀”的痕迹了，也许是音乐本身就是这样，或者是扬声器最高只能到这个水平了吧。其实我也没有那么追求HiFi，能到这样我已经很满意了。   

# 感想
  虽然对人来说也许听HiFi并不能听出来什么，但是追求HiFi还是挺有意思的，毕竟提高还原程度是可以通过可视化的方式看到的，既然如此，那就是有追求的价值。看不见的东西是玄学，可以不去追求，但是HiFi是实实在在存在的，这样也就能理解为什么会有人花大价钱去买各种昂贵的设备来提高还原度了，因为这是真的可以起到作用的啊……当然对我来说，能0成本做到尽可能的HiFi才是最重要的，花钱达到HiFi就没什么必要了🤣。   